webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(1),o=r(a);o["default"].update(function(e){return e})},1:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),s=r(c),f=n(159),p=n(160),d=n(162),m=r(d),b=n(164),h=r(b),y=n(171),v=r(y),g=n(228),E=r(g),O=function(e){function t(){var e,n,r,u;a(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=r=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.open=function(e){return function(){r.dispatch("tabs:open",e)}},u=n,o(r,u)}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props.state;return s["default"].createElement("div",null,s["default"].createElement("ul",{className:"tabs","data-ks-tabs":!0},s["default"].createElement("li",{className:"open tab-input-tab"},s["default"].createElement("a",{href:"#tab-input",onClick:this.open("input")},"入力")),s["default"].createElement("li",{className:"tab-csv-tab"},s["default"].createElement("a",{href:"#tab-csv",onClick:this.open("csv")},"インポート/エクスポート")),s["default"].createElement("li",{className:"tab-result-tab"},s["default"].createElement("a",{href:"#tab-result",onClick:this.open("result")},"計算結果"))),s["default"].createElement("div",{className:"tab_pane_container"},s["default"].createElement("article",{id:"tab-input"},s["default"].createElement(v["default"],e)),s["default"].createElement("article",{id:"tab-csv"},s["default"].createElement(E["default"],e)),s["default"].createElement("article",{id:"tab-result"},s["default"].createElement(h["default"],e))))}}]),t}(p.Component),C=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(e){return s["default"].createElement(O,{state:e})}},{key:"subscribe",value:function(){var e=this;this.on("tabs:open",function(t){e.update(function(e){return i({},e,{tab:t})})}),this.on("input:label:change",function(t){e.update(function(e){return e.store.updateLabelOf(t.id,t.label),e})}),this.on("input:size:change",function(t){e.update(function(e){return e.store.updateSizeOf(t.id,t.size),e})}),this.on("input:color:change",function(t){e.update(function(e){return e.store.updateColorOf(t.id,t.color),e})}),this.on("input:copy",function(t){e.update(function(e){return e.store.copy(t),e})}),this.on("input:remove",function(t){e.update(function(e){return e.store.remove(t),e})}),this.on("inputs:add",function(t){e.update(function(e){return e.store.addDefault(t),e})}),this.on("inputs:import",function(t){e.update(function(e){return e.store["import"](t),i({},e,{importing:!0})})}),this.on("inputs:import:done",function(){e.update(function(e){return i({},e,{importing:!1})})})}}]),t}(p.Flux);t["default"]=new C({renderer:function(e){(0,f.render)(e,document.getElementById("app"))},initialState:{store:new m["default"],tab:"input",importing:!1},middlewares:[]})},162:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(163),i=function(e){return{label:"支柱"+e,size:u.lumberSize,color:{r:240,g:225,b:170,a:1}}},l=function(){function e(){r(this,e),this.cuts=[],this.nextId=1}return o(e,[{key:"updateLabelOf",value:function(e,t){this.cuts[e].label=t}},{key:"updateSizeOf",value:function(e,t){this.cuts[e].size=t}},{key:"updateColorOf",value:function(e,t){this.cuts[e].color=t}},{key:"remove",value:function(e){delete this.cuts[e]}},{key:"addDefault",value:function(e){if("undefined"==typeof e)this.add(i(this.nextId));else for(var t=0;e>t;t++)this.add(i(this.nextId))}},{key:"add",value:function(e){this.cuts[this.nextId]=e,this.nextId=this.nextId+1}},{key:"copy",value:function(e){var t=this.cuts[e];"undefined"!=typeof t&&this.add(a({},t))}},{key:"all",value:function(){return this.cuts.map(function(e,t){return a({id:t},e)})}},{key:"import",value:function(e){var t=this;this.cuts=[],e.forEach(function(e){t.add(e)})}}]),e}();t["default"]=l},163:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.lumberSize=3650},164:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=r(l),s=n(160),f=n(165),p=r(f),d=n(170),m=r(d),b=n(163),h=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.rest,n=e.cuts,r=function(e,t){var n=e.color,r=n.r,a=n.g,o=n.b,u=n.a,i=Math.floor(200*t.luminosity());return{width:e.size/b.lumberSize*100+"%",backgroundColor:"rgba("+r+","+a+","+o+","+u+")",borderColor:"rgb("+i+","+i+","+i+")"}},a=function(e){var t=e.luminosity(),n=Math.floor(t>=.5?256*t-128:243);return{color:"rgb("+n+","+n+","+n+")"}},o=function(e){return{backgroundColor:"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}};return c["default"].createElement("div",{className:"lumber-wrapper"},c["default"].createElement("p",{className:"lumber-info"},n.map(function(e,t){return c["default"].createElement("span",{key:t,className:"cut"},c["default"].createElement("span",{style:o(e.color),className:"cut-color"}),c["default"].createElement("span",{className:"cut-label"},e.label),c["default"].createElement("span",{className:"cut-size"},e.size))}),c["default"].createElement("span",{className:"lumber-rest"},"残り",t,"mm")),c["default"].createElement("div",{className:"lumber"},n.map(function(e,t){var n=(0,p["default"])(e.color);return c["default"].createElement("div",{key:t,style:r(e,n),className:"cut"},c["default"].createElement("span",{style:a(n),className:"cut-size"},e.size,"mm"))})))}}]),t}(s.Component),y=function(e){function t(){var e,n,r,u;a(this,t);for(var i=arguments.length,l=Array(i),s=0;i>s;s++)l[s]=arguments[s];return n=r=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.render=function(){var e=r.props.store,t=(0,m["default"])(e.all());return c["default"].createElement("ol",{className:"result"},t.map(function(e,t){return c["default"].createElement("li",{key:t},c["default"].createElement(h,e))}))},u=n,o(r,u)}return u(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e){return"result"===e.tab}}]),t}(s.Component);t["default"]=y},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){e.sort(function(e,t){var n=t.size-e.size;return 0===n?e.id-t.id:n});var t=[];return e.forEach(function(e){var n=t.findIndex(function(t){return t.rest>=e.size});n>=0?o(t[n],e):t.push(a(e))}),t};var r=n(163),a=function(e){return{rest:r.lumberSize-e.size,cuts:[e]}},o=function(e,t){e.rest=e.rest-t.size,e.cuts.push(t)}},171:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),s=r(c),f=n(160),p=n(172),d=r(p),m=function(e){function t(){var e,n,r,u;a(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=r=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={displayColorPicker:!1},r.onLabelChange=function(e){r.dispatch("input:label:change",{id:r.props.id,label:e.target.value})},r.onSizeChange=function(e){r.dispatch("input:size:change",{id:r.props.id,size:e.target.value})},r.onColorChange=function(e){r.onCloseColorPicker(),r.dispatch("input:color:change",{id:r.props.id,color:e.rgb})},r.openColorPicker=function(){r.setState({displayColorPicker:!0})},r.onCloseColorPicker=function(){r.setState({displayColorPicker:!1})},r.copy=function(){r.dispatch("input:copy",r.props.id)},r.remove=function(){r.dispatch("input:remove",r.props.id)},u=n,o(r,u)}return u(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.label!==this.props.label||e.size!==this.props.size||JSON.stringify(e.color)!==JSON.stringify(this.props.color)||t.displayColorPicker!==this.state.displayColorPicker}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.size,r=e.color;return s["default"].createElement("div",{className:"size-input form_group form_group-horizontal"},s["default"].createElement("div",{style:{backgroundColor:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"},className:"color",onClick:this.openColorPicker}),this.state.displayColorPicker&&s["default"].createElement(d["default"],{display:this.state.displayColorPicker,onChangeComplete:this.onColorChange,onClose:this.onCloseColorPicker,color:r,className:"color-picker",positionCSS:{position:"absolute",top:"50px",left:"0"},type:"swatches"}),s["default"].createElement("label",null,"名前"),s["default"].createElement("input",{type:"text",value:t,onChange:this.onLabelChange}),s["default"].createElement("label",null,"長さ(mm)"),s["default"].createElement("input",{type:"number",value:n,min:10,max:3650,onChange:this.onSizeChange}),s["default"].createElement("button",{onClick:this.copy},"コピー"),s["default"].createElement("button",{onClick:this.remove},"x"))}}]),t}(f.Component),b=function(e){function t(){var e,n,r,u;a(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=r=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={num:1},r.handleNum=function(e){r.setState({num:e.target.value})},r.addInput=function(){r.dispatch("inputs:add",r.state.num)},u=n,o(r,u)}return u(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return"input"===e.tab||e.importing}},{key:"componentDidUpdate",value:function(e){!e.importing&&this.props.importing&&(window.k$.status({text:"インポートが完了しました",type:"status-green"}),this.dispatch("inputs:import:done"))}},{key:"render",value:function(){return s["default"].createElement("div",null,this.props.store.all().map(function(e){return s["default"].createElement(m,i({key:e.id},e))}),s["default"].createElement("div",{className:"form_group form_group-horizontal"},s["default"].createElement("input",{type:"number",value:this.state.num,min:1,max:200,onChange:this.handleNum}),s["default"].createElement("button",{onClick:this.addInput},"追加")))}}]),t}(f.Component);t["default"]=b},228:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),c=r(l),s=n(160),f=n(229),p=r(f),d=n(252),m=r(d),b=n(163),h=function(e){function t(){var e,n,r,u;a(this,t);for(var i=arguments.length,l=Array(i),c=0;i>c;c++)l[c]=arguments[c];return n=r=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.read=function(){var e=document.getElementById("csv-import-area").value,t={columns:!0};(0,p["default"])(e,t,function(e,t){e?console.error(e):r.dispatch("inputs:import",t.map(function(e,t){return{label:e.label||"支柱"+t,size:e.size||b.lumberSize,color:{r:1*(e.r||240),g:1*(e.g||225),b:1*(e.b||170),a:1*(e.a||1)}}}))})},r.componentWillUpdate=function(e){var t=e.store,n=t.all().map(function(e){return{label:e.label,size:e.size,r:e.color.r,g:e.color.g,b:e.color.b,a:e.color.a}}),r={header:!0};(0,m["default"])(n,r,function(e,t){e?console.error(e):document.getElementById("csv-export-area").value=t})},u=n,o(r,u)}return u(t,e),i(t,[{key:"shouldComponentUpdate",value:function(e){return"csv"===e.tab}},{key:"render",value:function(){return c["default"].createElement("div",null,c["default"].createElement("div",{className:"csv-area-wrapper"},c["default"].createElement("p",null,"保存したデータを貼り付けて読み込むことができます。データ形式はCSVです (Excelなどで作成する場合はヘッダーを label, size, r, g, b, a としてください)。"),c["default"].createElement("textarea",{id:"csv-import-area",className:"csv-area"}),c["default"].createElement("div",{className:"csv-buttons"},c["default"].createElement("button",{"data-ks-tooltip":"データを読み込み、現在のデータを上書きします","data-ks-tooltip-position":"bottom",onClick:this.read},"読み込む"))),c["default"].createElement("hr",null),c["default"].createElement("div",{className:"csv-area-wrapper"},c["default"].createElement("p",null,"現在の入力データです。コピーして保存してください。"),c["default"].createElement("textarea",{id:"csv-export-area",className:"csv-area",readOnly:!0})))}}]),t}(s.Component);t["default"]=h}});
//# sourceMappingURL=bundle.js.map